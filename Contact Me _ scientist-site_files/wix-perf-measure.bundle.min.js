!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wix-perf-measure",[],t):"object"==typeof exports?exports["wix-perf-measure"]=t():e["wix-perf-measure"]=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://static.parastorage.com/services/wix-perf-measure/1.92.0/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r={capture:!0,once:!0,passive:!0},i="-contentful-paint",o="first"+i,a="largest"+i;function u(){}function s(e){return function(){return Promise.reject(e)}}var c=Math.round,f=Math.max;function d(e,t){return e.getEntriesByType&&e.getEntriesByType(t)[0]}function l(e){return Promise.allSettled(e).then((function(e){return e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}))}))}function v(e,t){return t||e&&e.closest("*[id]")}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((function(t){l(n).then((function(n){var r=n.reduce((function(e,t){return Object.assign(e,t)}),{});r.entryType=e,t(r)}))}))}function m(e){return new Promise((function(t){function n(e,t){return void 0===t&&(t=0),{entryType:"visibility",type:e,startTime:c(t)}}document.hidden?t(n("visibilitychange")):(e.document.addEventListener("visibilitychange",(function(e){var r=e.timeStamp;t(n("visibilitychange",r))}),r),e.addEventListener("unload",(function(e){var r=e.timeStamp;t(n("unload",r))}),r))}))}function y(e){var t=e.screen,n=e.navigator,r={entryType:"client",screenRes:t.width+"x"+t.height,availScreenRes:t.availWidth+"x"+t.availHeight,windowInner:e.innerWidth+"x"+e.innerHeight,windowOuter:e.outerWidth+"x"+e.outerHeight,devicePixelRatio:c(10*e.devicePixelRatio),colorDepth:t.colorDepth},i=t.orientation;i&&i.type&&(r.orientation=i.type);var o=n.connection,a=n.deviceMemory,u=n.hardwareConcurrency;if(u&&(r.cores=u),a&&(r.memory=Math.floor(a)),o){var s=o.type,f=o.effectiveType,d=o.rtt,l=o.downlink,v=o.saveData;s&&(r.type=s),f&&(r.effectiveType=f),d&&(r.rtt=d),l&&(r.download=Math.min(c(l),1e4)),"boolean"==typeof v&&(r.saveData=v)}return Promise.resolve(r)}var h={__proto__:{load:function(e){Object.entries(h).filter((function(t){var n=t[0];return e.hasOwnProperty(n)})).map((function(e){return[e[0],typeof e[1]]})).forEach((function(t){var n=t[0];switch(t[1]){case"boolean":h[n]=!0;break;case"number":var r=Number(e[n]);Number.isNaN(r)||(h[n]=r);break;default:h[n]=e[n]}})),h.forceBi&&(h.bi=!0);h.bi&&(h.fine=!0)}},resourceDebounce:3e3,taskDelta:300,lcpMin:500,downloadToRenderDelta:1e3,ignoreResources:"cdn_detect,-analytics",fine:!1,label:"wixPerformanceMeasurements",log:!1,bi:!1,forceBi:!1,sampleRatio:0};var b=h;function g(e,t){var n,r,i=d(t,"navigation");i?((r={})[b.fine?"type":"navigationType"]=i.type,r.protocol=i.nextHopProtocol,n=r):(i=t.timing,n={});var o=i,a=o.navigationStart,u=void 0===a?0:a,s=o.domainLookupStart,f=o.domainLookupEnd,l=o.redirectStart,v=o.redirectEnd,p=o.connectStart,m=o.connectEnd,y=o.secureConnectionStart,h=o.requestStart,g=o.responseStart;n.dns=c(f-s);var w=c(v-l);w&&(n.redirect=w),y?(n.tcp=c(y-p),n.ssl=c(m-y)):n.tcp=c(m-p),n.ttfb=c(g-u),n.response=c(g-h),n.entryType="navigation-start";var S=e.document.referrer,x=e.location.href;return n.url=T(x,!0),S&&(n.referrer=T(S,!1)),Promise.resolve(n)}function T(e,t){var n=/^https?:\/\/(?:www\.)?(.*)/.exec(e);if(n){var r=n[1];return t||!r?r:r.replace(/\?.*$/,"")}}var w;function S(e,t){return new Promise((function(n){e.addEventListener("load",(function(){setTimeout((function(){var e,r,i=d(t,"navigation");if(i){var o=i,a=o.duration,u=o.transferSize,s=o.decodedBodySize;r=0,e={duration:c(a),transferSize:u,decodedBodySize:s}}else{r=(i=t.timing).navigationStart,e={duration:i.loadEventEnd-r}}var f=i,l=f.responseEnd,v=f.domContentLoadedEventEnd;e.ttlb=c(l-r),e.dcl=c(v-r),e.entryType="navigation-finish",e.caching=function(e){var t=e.requestStart,n=e.responseStart,r=e.responseEnd,i=e.transferSize,o=e.encodedBodySize;if("number"==typeof i){if(0===i)return"browser";if(i<o)return"eTag"}else{if(n-t<13)return"browser";if(r-n<13)return"maybe eTag"}if(r-n<333)return"maybe CDN";return"unknown"}(i),n(e)}))}),r)}))}var x=["cdn","dc","microPop","caching","is_rollout","is_platform_loaded","maybeBot"],E=((w={}).is_rollout="isRollout",w.is_platform_loaded="isPlatformLoaded",w.is_ssr="isSsr",w.viewer_name="viewerName",w);function P(e){return new Promise((function(t,n){e.addEventListener("load",(function(){var r=e.wixBiSession||e.bi&&e.bi.wixBiSession;if(r){var i=e.clientSideRender,o=e.ssrInfo,a=e.thunderboltVersion,u=a||e.boltVersion,s={entryType:"wix"},c=b.fine?{}:E;f(s,"v",u),f(s,"is_ssr",!i),o&&f(s,"ssrDuration",o.timeSpentInSSR),f(s,"viewer_name",a?"thunderbolt":r.renderType),x.forEach((function(e){return f(s,e,r[e])})),t(s)}else n("wix");function f(e,t,n){void 0!==n&&(e[c[t]||t]=/^is_/.test(t)?!!n:n)}}),r)}))}function R(e,t,n,r){if(void 0===n&&(n=u),void 0===r&&(r=!0),e){var i=e.supportedEntryTypes;if(i&&i.includes(t)){var o=new e((function(e,t){return n(e.getEntries(),t)}));try{o.observe({type:t,buffered:r})}catch(e){o.observe({entryTypes:[t]})}return o}}}var _,j=function(e){var t=e.initiatorType,n=e.name;return"script"===t||"link"===t&&/\.js$/.test(n)},I=function(e){var t=e.initiatorType,n=e.name;return"img"===t||"css"===t&&/\.(?:jpe?g|png|webp|gif)/i.test(n)},B=function(e){var t=e.initiatorType,n=e.name;return"css"===t&&n.includes("font")||/\.(?:woff2?|ttf|eot)/i.test(n)},O=[];function k(e,t){if(1===O.push(t)){var n=b.ignoreResources.split(",");_=R(e,"resource",(function(e){(e=e.filter((function(e){var t=e.name;return!n.some((function(e){return t.includes(e)}))}))).length&&O.forEach((function(t){t(e,(function(){var e=O.indexOf(t);O.splice(e,1),0===O.length&&_.disconnect()}))}))}))}return _}function M(e,t,n,r,i){var o=void 0===i?{}:i,a=o.filter,u=o.tag,s=void 0===u?!b.fine:u,c=o.debounce,f=void 0===c?b.resourceDebounce:c,d=new Promise((function(e){var t=[],r=setTimeout(o,f),i=k(n,(function(e,n){a&&(e=e.filter(a)),e.length&&(t.push.apply(t,e),clearTimeout(r),r=setTimeout((function(){o(),n()}),f))}));function o(){i&&i.takeRecords&&t.push.apply(t,i.takeRecords()),e(t)}})).then((function(e){if(!e.length)return{entryType:r,count:0};var t=Math.round,n=Math.max,i=e.reduce((function(e,t){var r=t.transferSize,i=t.responseStart,o=t.responseEnd;return{tbd:e.tbd+r,firstResponse:i>0&&i<e.firstResponse?i:e.firstResponse,lastResponse:n(e.lastResponse,o)}}),{tbd:0,firstResponse:Number.MAX_SAFE_INTEGER,lastResponse:0}),o=i.tbd,a=i.firstResponse,u=i.lastResponse,s=e.filter((function(e){return"number"==typeof e.requestStart})).map((function(e){var t=e.requestStart;return e.responseStart-t})).sort(),c=s.length,f=c>>1,d=e.length,l={entryType:r,count:d,startTime:t(a),duration:t(u-a),mttfb:t(c%2?s[f]:(s[f-1]+s[f])/2),attfb:t(s.reduce((function(e,t){return e+t}),0)/c)};return Number.isNaN(o)||(l.tbd=o),l}),(function(){return{entryType:r,count:0}}));if(!s)return d;var l,v=(l=r)[0].toUpperCase()+l.slice(1);return d.then((function(e){return Object.entries(e).reduce((function(e,t){var n=t[0],r=t[1];return e["entryType"===n?n:n+v]=r,e}),{})}))}function D(e,t,n){return M(0,0,n,"scripts",{filter:j})}function N(e,t,n){return M(0,0,n,"images",{filter:I})}function z(e,t,n){return M(0,0,n,"fonts",{filter:B})}function L(e,t,n,r){return new Promise((function(i,o){var a=R(e,t,(function(e){return n(e,(function(e){a.disconnect(),i(e)}))}),r);a||o(t)}))}function A(e,t,n){var r={entryType:"initial-paint"};return L(n,"paint",(function(e,t){var n=!1;e.forEach((function(e){var t=e.name,i=e.startTime;r[t]=c(i),t===o&&(n=!0)})),n&&t(r)}))}function C(e,t,n,i,a){var d=b.resourceDebounce,l=b.taskDelta,v=new Promise((function(t){"loading"!==e.document.readyState?t(0):e.addEventListener("DOMContentLoaded",(function(e){var n=e.timeStamp;t(n)}),r)}));return i.then((function(e){var t=e[o];return new Promise((function(e){var r=0,i=[],o=R(n,"longtask",(function(e){i.push.apply(i,e),r&&(clearTimeout(r),r=setTimeout(p,l))}),!1),s=!1,c=t,p=function(n){o&&o.disconnect(),e({lts:i,fcp:t,finished:c,tti:n}),s=!0};if(o){var m=function(){return r=setTimeout(p,l)},y=setTimeout(m,d);k(n,(function(e,t){if(s)return clearTimeout(y),void t();(e=e.filter((function(e){return function(e){var t=e.initiatorType;return"fetch"===t||"xmlhttprequest"===t}(e)||j(e)}))).length&&(c=e.reduce((function(e,t){var n=t.startTime,r=t.duration;return f(e,n+r)}),c),v.then((function(e){c=f(e,t),clearTimeout(y),y=setTimeout((function(){t(),m()}),d)})))})),a.then((function(e){var t=e.startTime,n=e.duration;return p(t+n)})).catch(u)}else p()}))})).then((function(t){var n=t.lts,r=t.fcp,i=t.finished,o=t.tti,a=void 0===o?function(e,t,n,r){var i=e.findIndex((function(e){var t=e.startTime,i=e.duration;if(t>n+r)return!0;n=f(n,t+i)}));-1===i&&(i=e.length);if(0===i)return t;var o=e[i-1];return o.startTime+o.duration}(n,r,i,l):o,u=e.document,s=e.innerHeight,d=function(e,t){for(var n=0,r=0;r<e.length;++r){var i=e[r],o=i.startTime,a=i.duration;if(o>t)break;n+=a-50}return n}(n,a),v={entryType:"interactive",tti:c(a),tbt:c(d),iframes:u.querySelectorAll("iframe").length},p=f(u.body.offsetHeight,s);return p>0&&(v.screens=c(u.body.scrollHeight/p)),v})).catch(s("interactive"))}var q=a;function H(e,t,n,r,i){return Promise.all([r,i]).then((function(e){var r=e[0][o],i=e[1].tti,a=b.lcpMin,u=b.downloadToRenderDelta,s=b.resourceDebounce,d=b.fine,l=f(i,r+a),p=0;return L(n,q,(function(e,n){var r=e.reverse().find((function(e){var n=e.url,r=e.startTime;if(r<l)return!0;if(n){var i=t.getEntriesByName(n)[0];if(i){var o=i.initiatorType,a=i.startTime,s=i.duration;if(a<l&&r-(a+s)<u&&"link"!==o)return!0}}return!1}));r&&(clearTimeout(p),p=setTimeout((function(){var e,t=r.startTime,i=r.size,o=r.id,a=r.element,u=((e={entryType:q})[d?"startTime":q]=c(t),e[d?"size":"lcpSize"]=i,e),s=v(a,o);s&&(u.closestId=s),n(u)}),s))}))})).catch(s(q))}function U(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n,r,i){return Promise.all([r,i]).then((function(e){var t,r=e[0].tti,i=e[1].startTime,o=f(r,i),a=R(n,"layout-shift");if(!a||!a.takeRecords)throw"layout-shift";var u=a.takeRecords();a.disconnect();for(var s,d=0,l=0,v=U(u);!(s=v()).done;){var p=s.value,m=p.lastInputTime,y=p.startTime,h=p.value;if(m>0||y>o)break;d+=h,++l}return(t={entryType:"layout-shift",cls:c(1e4*d)})[b.fine?"count":"countCls"]=l,t})).catch(s("layout-shift"))}function V(e,t,n){return L(n,"first-input",(function(e,t){var n=e[0],r=n.name,i=n.startTime,o=n.duration,a=n.target,u={entryType:"first-input",action:r,startTime:c(i),duration:c(o),detail:r},s=v(a);s&&(u.closestId=s),t(u)}))}var F,G=function(e){return"\u23f1"+e},X=G("tti"),J=G("lcp");function K(e){console.log("\u23f1",e)}var Q=((F={client:31,navigation:35,wix:32,scripts:33,images:34,fonts:36,"initial-paint":37,interactive:38})[a]=39,F["layout-shift"]=40,F.visibility=41,F["first-input"]=42,F),Y={evid:"evid",vsi:"viewerSessionId",rid:"requestId",sid:"sessionId",vid:"visitorId",msid:"metaSiteId",pid:"landingPageId"};function Z(e,t){return Object.entries(Y).filter((function(e){var n=e[1];return t.hasOwnProperty(n)})).map((function(e){var n=e[0],r=e[1],i=t[r];return[n,"function"==typeof i?t[r]():i]})).reduce((function(e,t){var n=t[0],r=t[1];return e.push(n+"="+r),e}),e)}function ee(e,t,n){var r=[];r.push(y(e)),r.push(p("navigation",g(e,t),S(e,t))),r.push(P(e));var i=D(0,0,n);r.push(i);var o=N(0,0,n);r.push(o);var a=z(0,0,n);r.push(a);var u=A(0,0,n);r.push(u);var s=V(0,0,n),c=C(e,0,n,u,s);r.push(c);var f=H(0,t,n,u,c);return r.push(f),r.push($(0,0,n,c,f)),r.push(m(e)),r.push(s),r}function te(e,t,n){var r=p("environment",y(e),g(e,t),P(e)),i=A(0,0,n),o=V(0,0,n),a=C(e,0,n,i,o),u=H(0,t,n,i,a);return[r,i,p("loaded",a,u,$(0,0,n,a,u),D(0,0,n),N(0,0,n),z(0,0,n),S(e,t)),o,m(e)]}!function(e){if("function"!=typeof Promise||!Promise.allSettled)return;var t=e.document,n=e.performance,r=e.PerformanceObserver,i=e.CustomEvent,s=t.currentScript||t.getElementById("wix-perf-measure");s&&b.load(s.dataset);var c=b.fine,f=b.log,d=b.bi,v=b.label,p=Object.freeze((c?ee:te)(e,n,r)),m=p.slice(0,-2),y=p.slice(-2);(function(e,t){function n(e,t){return e.find((function(e){return e.entryType===t}))||{}}function r(t,n,r){n&&e.mark(t,{startTime:n,detail:r})}function i(t,n){n.end>n.start&&e.measure(t,n)}l(t).then((function(e){var t,u,s,c=n(e,"initial-paint")[o];if(b.fine){var f=n(e,"interactive");t=f.tti,u=f.tbt,s=n(e,a).startTime}else{var d=n(e,"loaded");t=d.tti,u=d.tbt,s=d[a]}r(J,s),r(X,t,u);var l={end:s},v={end:t,detail:u},p=s<t?[c,s]:[t,c];l.start=p[0],v.start=p[1],i(J,l),i(X,v)}),u)})(n,m),f&&function(e,t){l(e).then((function(e){return e.forEach(K)}),u),t.forEach((function(e){return e.then(K,u)}))}(m,y);d&&function(e,t){var n=e.navigator,r=e.bi,i=void 0===r?{}:r,o=e.wixBiSession,a=void 0===o?i.wixBiSession:o,s=e.serviceTopology,c=void 0===s?{}:s,f=e.rendererModel,d=void 0===f?{}:f,l=b.forceBi,v=b.sampleRatio;if(a&&(!a.suppressbi||l)){var p=c.biServerUrl||"https://frog.wix.com/";t.forEach((function(e){return e.then((function(e){var t=Q[e.entryType];if(t){if(v)if((a.coin||parseInt(a.viewerSessionId,16))%v)return;var r=Object.entries(e).filter((function(e){var t=e[0],n=e[1];return"detail"!==t&&"object"!=typeof n&&!Number.isNaN(n)})).map((function(e){var t,n=e[0],r=e[1];switch(typeof r){case"string":t=encodeURIComponent(r);break;case"boolean":t=r?1:0;break;default:t=r}return n.replace(/-/g,"_")+"="+t}));if(r.length){var o=["/bb?src=29","evid="+t];Z(o,a),Z(o,d);var u=[].concat(o,r).join("&"),s=new URL(u,p).href;l?(new Image).src=s:i.sendBeacon?i.sendBeacon(s):a.sendBeacon?a.sendBeacon(s):n.sendBeacon&&n.sendBeacon(s)}}}),u)}))}}(e,p);e[v]=p;var h=new i(v,{detail:p});e.dispatchEvent(h)}(window)}])}));
//# sourceMappingURL=wix-perf-measure.bundle.min.js.map